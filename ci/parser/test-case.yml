
environment:
  image: haskell
  vars:
    - 

# Defaults applied to every test, unless
# otherwise specified.
defaults:
  stopOnFail: true
  expect:
    exit_code: 1

tests:

  # Test correct root files
  - command: ls -l
    expect:
      containsAll:
        - Student_Packages
        - report.pdf

  # Test correct student files
  - command: ls Student_Packages/
    expect:
      containsAll:
        - main.adb
        - main.ads

  # Test compilation
  - command: ghci main.hs -o main
    weight: 0.2
    expect:
      matches: "Answer: [0-9]*"
      isExactly: "Answer: 3.14159"
      contains: |
        Build successful!
        The answer is: 3.14159

  # Test that it runs for at least 5 seconds
  - command: ./main
    weight: 0.5
    expect:
      duration: >=5s
